var JSMpeg={Player:null,VideoElement:null,BitBuffer:null,Source:{},Demuxer:{},Decoder:{},Renderer:{},AudioOutput:{},Now:function(){return window.performance?window.performance.now()/1E3:Date.now()/1E3},CreateVideoElements:function(){for(var b=document.querySelectorAll(".jsmpeg"),a=0;a<b.length;a++)new JSMpeg.VideoElement(b[a])},Fill:function(b,a){if(b.fill)b.fill(a);else for(var c=0;c<b.length;c++)b[c]=a}};
"complete"===document.readyState?JSMpeg.CreateVideoElements():document.addEventListener("DOMContentLoaded",JSMpeg.CreateVideoElements);
JSMpeg.VideoElement=function(){var b=function(a){var c=a.dataset.url;if(!c)throw"VideoElement has no `data-url` attribute";var e=function(a,c){for(var e in c)a.style[e]=c[e]};this.container=a;e(this.container,{display:"inline-block",position:"relative",minWidth:"80px",minHeight:"80px"});this.canvas=document.createElement("canvas");this.canvas.width=960;this.canvas.height=540;e(this.canvas,{display:"block",width:"100%"});this.container.appendChild(this.canvas);this.playButton=document.createElement("div");
	this.playButton.innerHTML=b.PLAY_BUTTON;e(this.playButton,{zIndex:2,position:"absolute",top:"0",bottom:"0",left:"0",right:"0",maxWidth:"75px",maxHeight:"75px",margin:"auto",opacity:"0.7",cursor:"pointer"});this.container.appendChild(this.playButton);var d={canvas:this.canvas},k;for(k in a.dataset)try{d[k]=JSON.parse(a.dataset[k])}catch(t){d[k]=a.dataset[k]}this.player=new JSMpeg.Player(c,d);a.playerInstance=this.player;!d.poster||d.autoplay||this.player.options.streaming||(d.decodeFirstFrame=!1,this.poster=
		new Image,this.poster.src=d.poster,this.poster.addEventListener("load",this.posterLoaded),e(this.poster,{display:"block",zIndex:1,position:"absolute",top:0,left:0,bottom:0,right:0}),this.container.appendChild(this.poster));this.player.options.streaming||this.container.addEventListener("click",this.onClick.bind(this));if(d.autoplay||this.player.options.streaming)this.playButton.style.display="none";if(this.player.audioOut&&!this.player.audioOut.unlocked){a=this.container;if(d.autoplay||this.player.options.streaming)this.unmuteButton=
		document.createElement("div"),this.unmuteButton.innerHTML=b.UNMUTE_BUTTON,e(this.unmuteButton,{zIndex:2,position:"absolute",bottom:"10px",right:"20px",width:"75px",height:"75px",margin:"auto",opacity:"0.7",cursor:"pointer"}),this.container.appendChild(this.unmuteButton),a=this.unmuteButton;this.unlockAudioBound=this.onUnlockAudio.bind(this,a);a.addEventListener("touchstart",this.unlockAudioBound,!1);a.addEventListener("click",this.unlockAudioBound,!0)}};b.prototype.onUnlockAudio=function(a,c){this.unmuteButton&&
(c.preventDefault(),c.stopPropagation());this.player.audioOut.unlock(function(){this.unmuteButton&&(this.unmuteButton.style.display="none");a.removeEventListener("touchstart",this.unlockAudioBound);a.removeEventListener("click",this.unlockAudioBound)}.bind(this))};b.prototype.onClick=function(a){this.player.isPlaying?(this.player.pause(),this.playButton.style.display="block"):(this.player.play(),this.playButton.style.display="none",this.poster&&(this.poster.style.display="none"))};b.PLAY_BUTTON='<svg style="max-width: 75px; max-height: 75px;" viewBox="0 0 200 200" alt="Play video"><circle cx="100" cy="100" r="90" fill="none" stroke-width="15" stroke="#fff"/><polygon points="70, 55 70, 145 145, 100" fill="#fff"/></svg>';
	b.UNMUTE_BUTTON='<svg style="max-width: 75px; max-height: 75px;" viewBox="0 0 75 75"><polygon class="audio-speaker" stroke="none" fill="#fff" points="39,13 22,28 6,28 6,47 21,47 39,62 39,13"/><g stroke="#fff" stroke-width="5"><path d="M 49,50 69,26"/><path d="M 69,50 49,26"/></g></svg>';return b}();
JSMpeg.Player=function(){var b=function(a,c){this.options=c||{};c.source?(this.source=new c.source(a,c),c.streaming=!!this.source.streaming):a.match(/^wss?:\/\//)?(this.source=new JSMpeg.Source.WebSocket(a,c),c.streaming=!0):(this.source=!1!==c.progressive?new JSMpeg.Source.AjaxProgressive(a,c):new JSMpeg.Source.Ajax(a,c),c.streaming=!1);this.maxAudioLag=c.maxAudioLag||.25;this.loop=!1!==c.loop;this.autoplay=!!c.autoplay||c.streaming;this.demuxer=new JSMpeg.Demuxer.TS(c);this.source.connect(this.demuxer);
	!1!==c.video&&(this.video=new JSMpeg.Decoder.MPEG1Video(c),this.renderer=!c.disableGl&&JSMpeg.Renderer.WebGL.IsSupported()?new JSMpeg.Renderer.WebGL(c):new JSMpeg.Renderer.Canvas2D(c),this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.VIDEO_1,this.video),this.video.connect(this.renderer));!1!==c.audio&&JSMpeg.AudioOutput.WebAudio.IsSupported()&&(this.audio=new JSMpeg.Decoder.MP2Audio(c),this.audioOut=new JSMpeg.AudioOutput.WebAudio(c),this.demuxer.connect(JSMpeg.Demuxer.TS.STREAM.AUDIO_1,this.audio),this.audio.connect(this.audioOut));
	Object.defineProperty(this,"currentTime",{get:this.getCurrentTime,set:this.setCurrentTime});Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume});this.unpauseOnShow=!1;!1!==c.pauseWhenHidden&&document.addEventListener("visibilitychange",this.showHide.bind(this));this.source.start();this.autoplay&&this.play()};b.prototype.showHide=function(a){"hidden"===document.visibilityState?(this.unpauseOnShow=this.wantsToPlay,this.pause()):this.unpauseOnShow&&this.play()};b.prototype.play=
	function(a){this.animationId=requestAnimationFrame(this.update.bind(this));this.wantsToPlay=!0};b.prototype.pause=function(a){cancelAnimationFrame(this.animationId);this.isPlaying=this.wantsToPlay=!1;this.audio&&this.audio.canPlay&&(this.audioOut.stop(),this.seek(this.currentTime))};b.prototype.getVolume=function(){return this.audioOut?this.audioOut.volume:0};b.prototype.setVolume=function(a){this.audioOut&&(this.audioOut.volume=a)};b.prototype.stop=function(a){this.pause();this.seek(0);this.video&&
!1!==this.options.decodeFirstFrame&&this.video.decode()};b.prototype.destroy=function(){this.pause();this.source.destroy();this.renderer.destroy();this.audioOut.destroy()};b.prototype.seek=function(a){var c=this.audio&&this.audio.canPlay?this.audio.startTime:this.video.startTime;this.video&&this.video.seek(a+c);this.audio&&this.audio.seek(a+c);this.startTime=JSMpeg.Now()-a};b.prototype.getCurrentTime=function(){return this.audio&&this.audio.canPlay?this.audio.currentTime-this.audio.startTime:this.video.currentTime-
	this.video.startTime};b.prototype.setCurrentTime=function(a){this.seek(a)};b.prototype.update=function(){this.animationId=requestAnimationFrame(this.update.bind(this));this.source.established?(this.isPlaying||(this.isPlaying=!0,this.startTime=JSMpeg.Now()-this.currentTime),this.options.streaming?this.updateForStreaming():this.updateForStaticFile()):this.renderer&&this.renderer.renderProgress(this.source.progress)};b.prototype.updateForStreaming=function(){this.video&&this.video.decode();if(this.audio){var a;
	do this.audioOut.enqueuedTime>this.maxAudioLag&&(this.audioOut.resetEnqueuedTime(),this.audioOut.enabled=!1),a=this.audio.decode();while(a);this.audioOut.enabled=!0}};b.prototype.updateForStaticFile=function(){var a=!1,c=0;if(this.audio&&this.audio.canPlay){for(;!a&&.25>this.audio.decodedTime-this.audio.currentTime;)a=!this.audio.decode();this.video&&this.video.currentTime<this.audio.currentTime&&(a=!this.video.decode());c=this.demuxer.currentTime-this.audio.currentTime}else if(this.video){var c=
	JSMpeg.Now()-this.startTime+this.video.startTime,e=c-this.video.currentTime,b=1/this.video.frameRate;this.video&&0<e&&(e>2*b&&(this.startTime+=e),a=!this.video.decode());c=this.demuxer.currentTime-c}this.source.resume(c);a&&this.source.completed&&(this.loop?this.seek(0):this.pause())};return b}();
JSMpeg.BitBuffer=function(){var b=function(a,c){"object"===typeof a?(this.bytes=a instanceof Uint8Array?a:new Uint8Array(a),this.byteLength=this.bytes.length):(this.bytes=new Uint8Array(a||1048576),this.byteLength=0);this.mode=c||b.MODE.EXPAND;this.index=0};b.prototype.resize=function(a){var c=new Uint8Array(a);0!==this.byteLength&&(this.byteLength=Math.min(this.byteLength,a),c.set(this.bytes,0,this.byteLength));this.bytes=c;this.index=Math.min(this.index,this.byteLength<<3)};b.prototype.evict=function(a){var c=
	this.index>>3,e=this.bytes.length-this.byteLength;this.index===this.byteLength<<3||a>e+c?this.index=this.byteLength=0:0!==c&&(this.bytes.copyWithin?this.bytes.copyWithin(0,c,this.byteLength):this.bytes.set(this.bytes.subarray(c,this.byteLength)),this.byteLength-=c,this.index-=c<<3)};b.prototype.write=function(a){var c="object"===typeof a[0],e,d=this.bytes.length-this.byteLength;if(c)for(var k=e=0;k<a.length;k++)e+=a[k].byteLength;else e=a.byteLength;e>d&&(this.mode===b.MODE.EXPAND?this.resize(Math.max(2*
	this.bytes.length,e-d)):this.evict(e));if(c)for(k=0;k<a.length;k++)this.appendSingleBuffer(a[k]);else this.appendSingleBuffer(a)};b.prototype.appendSingleBuffer=function(a){a=a instanceof Uint8Array?a:new Uint8Array(a);this.bytes.set(a,this.byteLength);this.byteLength+=a.length};b.prototype.findNextStartCode=function(){for(var a=this.index+7>>3;a<this.byteLength;a++)if(0==this.bytes[a]&&0==this.bytes[a+1]&&1==this.bytes[a+2])return this.index=a+4<<3,this.bytes[a+3];this.index=this.byteLength<<3;return-1};
	b.prototype.findStartCode=function(a){for(var c;;)if(c=this.findNextStartCode(),c===a||-1===c)return c};b.prototype.nextBytesAreStartCode=function(){var a=this.index+7>>3;return a>=this.byteLength||0==this.bytes[a]&&0==this.bytes[a+1]&&1==this.bytes[a+2]};b.prototype.peek=function(a){for(var c=this.index,e=0;a;){var b=8-(c&7),k=b<a?b:a,b=b-k,e=e<<k|(this.bytes[c>>3]&255>>8-k<<b)>>b,c=c+k;a-=k}return e};b.prototype.read=function(a){var c=this.peek(a);this.index+=a;return c};b.prototype.skip=function(a){return this.index+=
		a};b.prototype.rewind=function(a){this.index=Math.max(this.index-a,0)};b.prototype.has=function(a){return(this.byteLength<<3)-this.index>=a};b.MODE={EVICT:1,EXPAND:2};return b}();
JSMpeg.Source.Ajax=function(){var b=function(a,c){this.url=a;this.request=this.destination=null;this.established=this.completed=!1;this.progress=0};b.prototype.connect=function(a){this.destination=a};b.prototype.start=function(){this.request=new XMLHttpRequest;this.request.onreadystatechange=function(){if(this.request.readyState===this.request.DONE&&200===this.request.status)this.onLoad(this.request.response)}.bind(this);this.request.onprogress=this.onProgress.bind(this);this.request.open("GET",this.url);
	this.request.responseType="arraybuffer";this.request.send()};b.prototype.resume=function(a){};b.prototype.destroy=function(){this.request.abort()};b.prototype.onProgress=function(a){this.progress=a.loaded/a.total};b.prototype.onLoad=function(a){this.completed=this.established=!0;this.progress=1;this.destination&&this.destination.write(a)};return b}();
JSMpeg.Source.AjaxProgressive=function(){var b=function(a,c){this.url=a;this.request=this.destination=null;this.established=this.completed=!1;this.loadedSize=this.fileSize=this.progress=0;this.chunkSize=c.chunkSize||1048576;this.isLoading=!1;this.loadStartTime=0;this.throttled=!1!==c.throttled;this.aborted=!1};b.prototype.connect=function(a){this.destination=a};b.prototype.start=function(){this.request=new XMLHttpRequest;this.request.onreadystatechange=function(){this.request.readyState===this.request.DONE&&
(this.fileSize=parseInt(this.request.getResponseHeader("Content-Length")),this.loadNextChunk())}.bind(this);this.request.onprogress=this.onProgress.bind(this);this.request.open("HEAD",this.url);this.request.send()};b.prototype.resume=function(a){!this.isLoading&&this.throttled&&8*this.loadTime+2>a&&this.loadNextChunk()};b.prototype.destroy=function(){this.request.abort();this.aborted=!0};b.prototype.loadNextChunk=function(){var a=this.loadedSize,c=Math.min(this.loadedSize+this.chunkSize-1,this.fileSize-
	1);a>=this.fileSize||this.aborted?this.completed=!0:(this.isLoading=!0,this.loadStartTime=JSMpeg.Now(),this.request=new XMLHttpRequest,this.request.onreadystatechange=function(){if(this.request.readyState===this.request.DONE&&200<=this.request.status&&300>this.request.status)this.onChunkLoad(this.request.response);else this.request.readyState===this.request.DONE&&3>this.loadFails++&&this.loadNextChunk()}.bind(this),0===a&&(this.request.onprogress=this.onProgress.bind(this)),this.request.open("GET",
	this.url+"?"+a+"-"+c),this.request.setRequestHeader("Range","bytes="+a+"-"+c),this.request.responseType="arraybuffer",this.request.send())};b.prototype.onProgress=function(a){this.progress=a.loaded/a.total};b.prototype.onChunkLoad=function(a){this.established=!0;this.progress=1;this.loadedSize+=a.byteLength;this.loadFails=0;this.isLoading=!1;this.destination&&this.destination.write(a);this.loadTime=JSMpeg.Now()-this.loadStartTime;this.throttled||this.loadNextChunk()};return b}();
JSMpeg.Source.WebSocket=function(){var b=function(a,c){this.url=a;this.options=c;this.socket=null;this.callbacks={connect:[],data:[]};this.destination=null;this.reconnectInterval=void 0!==c.reconnectInterval?c.reconnectInterval:5;this.shouldAttemptReconnect=!!this.reconnectInterval;this.established=this.completed=!1;this.reconnectTimeoutId=this.progress=0};b.prototype.connect=function(a){this.destination=a};b.prototype.destroy=function(){clearTimeout(this.reconnectTimeoutId);this.shouldAttemptReconnect=
	!1;this.socket.close()};b.prototype.start=function(){this.shouldAttemptReconnect=!!this.reconnectInterval;this.progress=0;this.established=!1;this.socket=new WebSocket(this.url,this.options.protocols||null);this.socket.binaryType="arraybuffer";this.socket.onmessage=this.onMessage.bind(this);this.socket.onopen=this.onOpen.bind(this);this.socket.onerror=this.onClose.bind(this);this.socket.onclose=this.onClose.bind(this)};b.prototype.resume=function(a){};b.prototype.onOpen=function(){this.progress=1;
	this.established=!0};b.prototype.onClose=function(){this.shouldAttemptReconnect&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){this.start()}.bind(this),1E3*this.reconnectInterval))};b.prototype.onMessage=function(a){this.destination&&this.destination.write(a.data)};return b}();
JSMpeg.Demuxer.TS=function(){var b=function(a){this.leftoverBytes=this.bits=null;this.guessVideoFrameEnd=!0;this.pidsToStreamIds={};this.pesPacketInfo={};this.currentTime=this.startTime=0};b.prototype.connect=function(a,c){this.pesPacketInfo[a]={destination:c,currentLength:0,totalLength:0,pts:0,buffers:[]}};b.prototype.write=function(a){this.leftoverBytes?(this.bits=new JSMpeg.BitBuffer(a.byteLength+this.leftoverBytes.byteLength),this.bits.write([this.leftoverBytes,a])):this.bits=new JSMpeg.BitBuffer(a);
	for(;this.bits.has(1504)&&this.parsePacket(););this.leftoverBytes=0<this.bits.byteLength-(this.bits.index>>3)?this.bits.bytes.subarray(this.bits.index>>3):null};b.prototype.parsePacket=function(){if(71!==this.bits.read(8)&&!this.resync())return!1;var a=(this.bits.index>>3)+187;this.bits.read(1);var c=this.bits.read(1);this.bits.read(1);var e=this.bits.read(13);this.bits.read(2);var b=this.bits.read(2);this.bits.read(4);var k=this.pidsToStreamIds[e];if(c&&k){var t=this.pesPacketInfo[k];t&&t.currentLength&&
this.packetComplete(t)}if(b&1){b&2&&(t=this.bits.read(8),this.bits.skip(t<<3));if(c&&this.bits.nextBytesAreStartCode()){this.bits.skip(24);k=this.bits.read(8);this.pidsToStreamIds[e]=k;e=this.bits.read(16);this.bits.skip(8);var m=this.bits.read(2);this.bits.skip(6);var n=this.bits.read(8),f=this.bits.index+(n<<3);if(t=this.pesPacketInfo[k]){var l=0;if(m&2){this.bits.skip(4);m=this.bits.read(3);this.bits.skip(1);l=this.bits.read(15);this.bits.skip(1);var g=this.bits.read(15);this.bits.skip(1);this.currentTime=
	l=(1073741824*m+32768*l+g)/9E4;-1===this.startTime&&(this.startTime=l)}this.packetStart(t,l,e?e-n-3:0)}this.bits.index=f}k&&(t=this.pesPacketInfo[k])&&(this.packetAddData(t,this.bits.index>>3,a)||this.guessVideoFrameEnd&&!c&&b&2)&&this.packetComplete(t)}this.bits.index=a<<3;return!0};b.prototype.resync=function(){if(!this.bits.has(9024))return!1;for(var a=this.bits.index>>3,c=0;187>c;c++)if(71===this.bits.bytes[a+c]){for(var e=!0,b=1;5>b;b++)if(71!==this.bits.bytes[a+c+188*b]){e=!1;break}if(e)return this.bits.index=
	a+c+1<<3,!0}console.warn("JSMpeg: Possible garbage data. Skipping.");this.bits.skip(1496);return!1};b.prototype.packetStart=function(a,c,e){a.totalLength=e;a.currentLength=0;a.pts=c};b.prototype.packetAddData=function(a,c,e){a.buffers.push(this.bits.bytes.subarray(c,e));a.currentLength+=e-c;return 0!==a.totalLength&&a.currentLength>=a.totalLength};b.prototype.packetComplete=function(a){a.destination.write(a.pts,a.buffers);a.totalLength=0;a.currentLength=0;a.buffers=[]};b.STREAM={PACK_HEADER:186,SYSTEM_HEADER:187,
	PROGRAM_MAP:188,PRIVATE_1:189,PADDING:190,PRIVATE_2:191,AUDIO_1:192,VIDEO_1:224,DIRECTORY:255};return b}();
JSMpeg.Decoder.Base=function(){var b=function(a){this.destination=null;this.canPlay=!1;this.collectTimestamps=!a.streaming;this.timestamps=[];this.decodedTime=this.startTime=this.timestampIndex=0;Object.defineProperty(this,"currentTime",{get:this.getCurrentTime})};b.prototype.connect=function(a){this.destination=a};b.prototype.write=function(a,c){this.collectTimestamps&&(0===this.timestamps.length&&(this.decodedTime=this.startTime=a),this.timestamps.push({index:this.bits.byteLength<<3,time:a}));this.bits.write(c);
	this.canPlay=!0};b.prototype.seek=function(a){if(this.collectTimestamps){for(var c=this.timestampIndex=0;c<this.timestamps.length&&!(this.timestamps[c].time>a);c++)this.timestampIndex=c;(a=this.timestamps[this.timestampIndex])?(this.bits.index=a.index,this.decodedTime=a.time):(this.bits.index=0,this.decodedTime=this.startTime)}};b.prototype.decode=function(){this.advanceDecodedTime(0)};b.prototype.advanceDecodedTime=function(a){if(this.collectTimestamps){for(var c=-1,e=this.timestampIndex;e<this.timestamps.length&&
!(this.timestamps[e].index>this.bits.index);e++)c=e;if(-1!==c&&c!==this.timestampIndex){this.timestampIndex=c;this.decodedTime=this.timestamps[this.timestampIndex].time;return}}this.decodedTime+=a};b.prototype.getCurrentTime=function(){return this.decodedTime};return b}();
JSMpeg.Decoder.MPEG1Video=function(){var b=function(a){JSMpeg.Decoder.Base.call(this,a);this.bits=new JSMpeg.BitBuffer(a.videoBufferSize||524288,a.streaming?JSMpeg.BitBuffer.MODE.EVICT:JSMpeg.BitBuffer.MODE.EXPAND);this.customIntraQuantMatrix=new Uint8Array(64);this.customNonIntraQuantMatrix=new Uint8Array(64);this.blockData=new Int32Array(64);this.currentFrame=0;this.decodeFirstFrame=!1!==a.decodeFirstFrame};b.prototype=Object.create(JSMpeg.Decoder.Base.prototype);b.prototype.constructor=b;b.prototype.write=
	function(a,c){JSMpeg.Decoder.Base.prototype.write.call(this,a,c);if(!this.hasSequenceHeader){if(-1===this.bits.findStartCode(b.START.SEQUENCE))return!1;this.decodeSequenceHeader();this.decodeFirstFrame&&this.decode()}};b.prototype.decode=function(){if(!this.hasSequenceHeader||-1===this.bits.findStartCode(b.START.PICTURE))return!1;this.decodePicture();this.advanceDecodedTime(1/this.frameRate);return!0};b.prototype.readHuffman=function(a){var c=0;do c=a[c+this.bits.read(1)];while(0<=c&&0!==a[c]);return a[c+
2]};b.prototype.frameRate=30;b.prototype.decodeSequenceHeader=function(){var a=this.bits.read(12),c=this.bits.read(12);this.bits.skip(4);this.frameRate=b.PICTURE_RATE[this.bits.read(4)];this.bits.skip(30);if(a!==this.width||c!==this.height)this.width=a,this.height=c,this.initBuffers(),this.destination&&this.destination.resize(a,c);if(this.bits.read(1)){for(a=0;64>a;a++)this.customIntraQuantMatrix[b.ZIG_ZAG[a]]=this.bits.read(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.bits.read(1)){for(a=
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0;64>a;a++)this.customNonIntraQuantMatrix[b.ZIG_ZAG[a]]=this.bits.read(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}this.hasSequenceHeader=!0};b.prototype.initBuffers=function(){this.intraQuantMatrix=b.DEFAULT_INTRA_QUANT_MATRIX;this.nonIntraQuantMatrix=b.DEFAULT_NON_INTRA_QUANT_MATRIX;this.mbWidth=this.width+15>>4;this.mbHeight=this.height+15>>4;this.mbSize=this.mbWidth*this.mbHeight;this.codedWidth=this.mbWidth<<4;this.codedHeight=this.mbHeight<<4;this.codedSize=this.codedWidth*this.codedHeight;
	this.halfWidth=this.mbWidth<<3;this.halfHeight=this.mbHeight<<3;this.currentY=new Uint8ClampedArray(this.codedSize);this.currentY32=new Uint32Array(this.currentY.buffer);this.currentCr=new Uint8ClampedArray(this.codedSize>>2);this.currentCr32=new Uint32Array(this.currentCr.buffer);this.currentCb=new Uint8ClampedArray(this.codedSize>>2);this.currentCb32=new Uint32Array(this.currentCb.buffer);this.forwardY=new Uint8ClampedArray(this.codedSize);this.forwardY32=new Uint32Array(this.forwardY.buffer);this.forwardCr=
		new Uint8ClampedArray(this.codedSize>>2);this.forwardCr32=new Uint32Array(this.forwardCr.buffer);this.forwardCb=new Uint8ClampedArray(this.codedSize>>2);this.forwardCb32=new Uint32Array(this.forwardCb.buffer)};b.prototype.currentY=null;b.prototype.currentCr=null;b.prototype.currentCb=null;b.prototype.pictureType=0;b.prototype.forwardY=null;b.prototype.forwardCr=null;b.prototype.forwardCb=null;b.prototype.fullPelForward=!1;b.prototype.forwardFCode=0;b.prototype.forwardRSize=0;b.prototype.forwardF=
	0;b.prototype.decodePicture=function(a){this.currentFrame++;this.bits.skip(10);this.pictureType=this.bits.read(3);this.bits.skip(16);if(!(0>=this.pictureType||this.pictureType>=b.PICTURE_TYPE.B)){if(this.pictureType===b.PICTURE_TYPE.PREDICTIVE){this.fullPelForward=this.bits.read(1);this.forwardFCode=this.bits.read(3);if(0===this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1;this.forwardF=1<<this.forwardRSize}do a=this.bits.findNextStartCode();while(a===b.START.EXTENSION||a===b.START.USER_DATA);
	for(;a>=b.START.SLICE_FIRST&&a<=b.START.SLICE_LAST;)this.decodeSlice(a&255),a=this.bits.findNextStartCode();-1!==a&&this.bits.rewind(32);this.destination&&this.destination.render(this.currentY,this.currentCr,this.currentCb);if(this.pictureType===b.PICTURE_TYPE.INTRA||this.pictureType===b.PICTURE_TYPE.PREDICTIVE){a=this.forwardY;var c=this.forwardY32,e=this.forwardCr,d=this.forwardCr32,k=this.forwardCb,t=this.forwardCb32;this.forwardY=this.currentY;this.forwardY32=this.currentY32;this.forwardCr=this.currentCr;
		this.forwardCr32=this.currentCr32;this.forwardCb=this.currentCb;this.forwardCb32=this.currentCb32;this.currentY=a;this.currentY32=c;this.currentCr=e;this.currentCr32=d;this.currentCb=k;this.currentCb32=t}}};b.prototype.quantizerScale=0;b.prototype.sliceBegin=!1;b.prototype.decodeSlice=function(a){this.sliceBegin=!0;this.macroblockAddress=(a-1)*this.mbWidth-1;this.motionFwV=this.motionFwVPrev=this.motionFwH=this.motionFwHPrev=0;this.dcPredictorCb=this.dcPredictorCr=this.dcPredictorY=128;for(this.quantizerScale=
			                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               this.bits.read(5);this.bits.read(1);)this.bits.skip(8);do this.decodeMacroblock();while(!this.bits.nextBytesAreStartCode())};b.prototype.macroblockAddress=0;b.prototype.mbRow=0;b.prototype.mbCol=0;b.prototype.macroblockType=0;b.prototype.macroblockIntra=!1;b.prototype.macroblockMotFw=!1;b.prototype.motionFwH=0;b.prototype.motionFwV=0;b.prototype.motionFwHPrev=0;b.prototype.motionFwVPrev=0;b.prototype.decodeMacroblock=function(){for(var a=0,c=this.readHuffman(b.MACROBLOCK_ADDRESS_INCREMENT);34===c;)c=
	this.readHuffman(b.MACROBLOCK_ADDRESS_INCREMENT);for(;35===c;)a+=33,c=this.readHuffman(b.MACROBLOCK_ADDRESS_INCREMENT);a+=c;if(this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=a;else{if(this.macroblockAddress+a>=this.mbSize)return;1<a&&(this.dcPredictorCb=this.dcPredictorCr=this.dcPredictorY=128,this.pictureType===b.PICTURE_TYPE.PREDICTIVE&&(this.motionFwV=this.motionFwVPrev=this.motionFwH=this.motionFwHPrev=0));for(;1<a;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|
	0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),a--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.macroblockType=this.readHuffman(b.MACROBLOCK_TYPE[this.pictureType]);this.macroblockIntra=this.macroblockType&1;this.macroblockMotFw=this.macroblockType&8;0!==(this.macroblockType&16)&&(this.quantizerScale=this.bits.read(5));this.macroblockIntra?
	this.motionFwV=this.motionFwVPrev=this.motionFwH=this.motionFwHPrev=0:(this.dcPredictorCb=this.dcPredictorCr=this.dcPredictorY=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var a=0!==(this.macroblockType&2)?this.readHuffman(b.CODE_BLOCK_PATTERN):this.macroblockIntra?63:0,c=0,e=32;6>c;c++)0!==(a&e)&&this.decodeBlock(c),e>>=1};b.prototype.decodeMotionVectors=function(){var a,c;this.macroblockMotFw?(a=this.readHuffman(b.MOTION),
	0!==a&&1!==this.forwardF?(c=this.bits.read(this.forwardRSize),c=(Math.abs(a)-1<<this.forwardRSize)+c+1,0>a&&(c=-c)):c=a,this.motionFwHPrev+=c,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),a=this.readHuffman(b.MOTION),0!==a&&1!==this.forwardF?(c=this.bits.read(this.forwardRSize),c=(Math.abs(a)-1<<this.forwardRSize)+c+
	1,0>a&&(c=-c)):c=a,this.motionFwVPrev+=c,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureType===b.PICTURE_TYPE.PREDICTIVE&&(this.motionFwV=this.motionFwVPrev=this.motionFwH=this.motionFwHPrev=0)};b.prototype.copyMacroblock=function(a,c,e,b,k){var d,m,n,f,l,g,r=this.currentY32,h=this.currentCb32,v=this.currentCr32;
	d=this.codedWidth;m=d-16;n=1===(c&1);f=((this.mbRow<<4)+(c>>1))*d+(this.mbCol<<4)+(a>>1);l=this.mbRow*d+this.mbCol<<2;g=l+(d<<2);var q,p,u;if(1===(a&1))if(n)for(;l<g;){q=e[f]+e[f+d];f++;for(n=0;4>n;n++)p=e[f]+e[f+d],f++,u=q+p+2>>2&255,q=e[f]+e[f+d],f++,u|=q+p+2<<6&65280,p=e[f]+e[f+d],f++,u|=q+p+2<<14&16711680,q=e[f]+e[f+d],f++,u|=q+p+2<<22&4278190080,r[l++]=u;l+=m>>2;f+=m-1}else for(;l<g;){q=e[f++];for(n=0;4>n;n++)p=e[f++],u=q+p+1>>1&255,q=e[f++],u|=q+p+1<<7&65280,p=e[f++],u|=q+p+1<<15&16711680,q=
		e[f++],u|=q+p+1<<23&4278190080,r[l++]=u;l+=m>>2;f+=m-1}else if(n)for(;l<g;){for(n=0;4>n;n++)u=e[f]+e[f+d]+1>>1&255,f++,u|=e[f]+e[f+d]+1<<7&65280,f++,u|=e[f]+e[f+d]+1<<15&16711680,f++,u|=e[f]+e[f+d]+1<<23&4278190080,f++,r[l++]=u;l+=m>>2;f+=m}else for(;l<g;){for(n=0;4>n;n++)u=e[f],f++,u|=e[f]<<8,f++,u|=e[f]<<16,f++,u|=e[f]<<24,f++,r[l++]=u;l+=m>>2;f+=m}d=this.halfWidth;m=d-8;n=1===(c/2&1);f=((this.mbRow<<3)+(c/2>>1))*d+(this.mbCol<<3)+(a/2>>1);l=this.mbRow*d+this.mbCol<<1;g=l+(d<<1);if(1===(a/2&1))if(n)for(;l<
		                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               g;){a=b[f]+b[f+d];r=k[f]+k[f+d];f++;for(n=0;2>n;n++)c=b[f]+b[f+d],q=k[f]+k[f+d],f++,e=a+c+2>>2&255,p=r+q+2>>2&255,a=b[f]+b[f+d],r=k[f]+k[f+d],f++,e|=a+c+2<<6&65280,p|=r+q+2<<6&65280,c=b[f]+b[f+d],q=k[f]+k[f+d],f++,e|=a+c+2<<14&16711680,p|=r+q+2<<14&16711680,a=b[f]+b[f+d],r=k[f]+k[f+d],f++,e|=a+c+2<<22&4278190080,p|=r+q+2<<22&4278190080,v[l]=e,h[l]=p,l++;l+=m>>2;f+=m-1}else for(;l<g;){a=b[f];r=k[f];f++;for(n=0;2>n;n++)c=b[f],q=k[f++],e=a+c+1>>1&255,p=r+q+1>>1&255,a=b[f],r=k[f++],e|=a+c+1<<7&65280,
		p|=r+q+1<<7&65280,c=b[f],q=k[f++],e|=a+c+1<<15&16711680,p|=r+q+1<<15&16711680,a=b[f],r=k[f++],e|=a+c+1<<23&4278190080,p|=r+q+1<<23&4278190080,v[l]=e,h[l]=p,l++;l+=m>>2;f+=m-1}else if(n)for(;l<g;){for(n=0;2>n;n++)e=b[f]+b[f+d]+1>>1&255,p=k[f]+k[f+d]+1>>1&255,f++,e|=b[f]+b[f+d]+1<<7&65280,p|=k[f]+k[f+d]+1<<7&65280,f++,e|=b[f]+b[f+d]+1<<15&16711680,p|=k[f]+k[f+d]+1<<15&16711680,f++,e|=b[f]+b[f+d]+1<<23&4278190080,p|=k[f]+k[f+d]+1<<23&4278190080,f++,v[l]=e,h[l]=p,l++;l+=m>>2;f+=m}else for(;l<g;){for(n=
			                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0;2>n;n++)e=b[f],p=k[f],f++,e|=b[f]<<8,p|=k[f]<<8,f++,e|=b[f]<<16,p|=k[f]<<16,f++,e|=b[f]<<24,p|=k[f]<<24,f++,v[l]=e,h[l]=p,l++;l+=m>>2;f+=m}};b.prototype.dcPredictorY=0;b.prototype.dcPredictorCr=0;b.prototype.dcPredictorCb=0;b.prototype.blockData=null;b.prototype.decodeBlock=function(a){var c=0,e;if(this.macroblockIntra){4>a?(c=this.dcPredictorY,e=this.readHuffman(b.DCT_DC_SIZE_LUMINANCE)):(c=4===a?this.dcPredictorCr:this.dcPredictorCb,e=this.readHuffman(b.DCT_DC_SIZE_CHROMINANCE));if(0<e){var d=
	this.bits.read(e);this.blockData[0]=0!==(d&1<<e-1)?c+d:c+(-1<<e|d+1)}else this.blockData[0]=c;4>a?this.dcPredictorY=this.blockData[0]:4===a?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0];this.blockData[0]<<=8;e=this.intraQuantMatrix;c=1}else e=this.nonIntraQuantMatrix;for(;;){var k,d=this.readHuffman(b.DCT_COEFF);if(1===d&&0<c&&0===this.bits.read(1))break;65535===d?(k=this.bits.read(6),d=this.bits.read(8),0===d?d=this.bits.read(8):128===d?d=this.bits.read(8)-256:128<d&&
	(d-=256)):(k=d>>8,d&=255,this.bits.read(1)&&(d=-d));c+=k;k=b.ZIG_ZAG[c];c++;d<<=1;this.macroblockIntra||(d+=0>d?-1:1);d=d*this.quantizerScale*e[k]>>4;0===(d&1)&&(d-=0<d?1:-1);2047<d?d=2047:-2048>d&&(d=-2048);this.blockData[k]=d*b.PREMULTIPLIER_MATRIX[k]}4>a?(e=this.currentY,k=this.codedWidth-8,d=this.mbRow*this.codedWidth+this.mbCol<<4,0!==(a&1)&&(d+=8),0!==(a&2)&&(d+=this.codedWidth<<3)):(e=4===a?this.currentCb:this.currentCr,k=(this.codedWidth>>1)-8,d=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<
	3));this.macroblockIntra?1===c?(b.CopyValueToDestination(this.blockData[0]+128>>8,e,d,k),this.blockData[0]=0):(b.IDCT(this.blockData),b.CopyBlockToDestination(this.blockData,e,d,k),JSMpeg.Fill(this.blockData,0)):1===c?(b.AddValueToDestination(this.blockData[0]+128>>8,e,d,k),this.blockData[0]=0):(b.IDCT(this.blockData),b.AddBlockToDestination(this.blockData,e,d,k),JSMpeg.Fill(this.blockData,0))};b.CopyBlockToDestination=function(a,c,b,d){for(var e=0;64>e;e+=8,b+=d+8)c[b+0]=a[e+0],c[b+1]=a[e+1],c[b+
2]=a[e+2],c[b+3]=a[e+3],c[b+4]=a[e+4],c[b+5]=a[e+5],c[b+6]=a[e+6],c[b+7]=a[e+7]};b.AddBlockToDestination=function(a,c,b,d){for(var e=0;64>e;e+=8,b+=d+8)c[b+0]+=a[e+0],c[b+1]+=a[e+1],c[b+2]+=a[e+2],c[b+3]+=a[e+3],c[b+4]+=a[e+4],c[b+5]+=a[e+5],c[b+6]+=a[e+6],c[b+7]+=a[e+7]};b.CopyValueToDestination=function(a,c,b,d){for(var e=0;64>e;e+=8,b+=d+8)c[b+0]=a,c[b+1]=a,c[b+2]=a,c[b+3]=a,c[b+4]=a,c[b+5]=a,c[b+6]=a,c[b+7]=a};b.AddValueToDestination=function(a,c,b,d){for(var e=0;64>e;e+=8,b+=d+8)c[b+0]+=a,c[b+
1]+=a,c[b+2]+=a,c[b+3]+=a,c[b+4]+=a,c[b+5]+=a,c[b+6]+=a,c[b+7]+=a};b.IDCT=function(a){for(var c,b,d,k,t,m,n,f,l,g,r,h=0;8>h;++h)c=a[32+h],b=a[16+h]+a[48+h],d=a[40+h]-a[24+h],m=a[8+h]+a[56+h],n=a[24+h]+a[40+h],k=a[8+h]-a[56+h],t=m+n,f=a[0+h],r=(473*k-196*d+128>>8)-t,m=r-(362*(m-n)+128>>8),n=f-c,l=(362*(a[16+h]-a[48+h])+128>>8)-b,g=f+c,c=n+l,f=g+b,n-=l,b=g-b,d=-m-(473*d+196*k+128>>8),a[0+h]=t+f,a[8+h]=r+c,a[16+h]=n-m,a[24+h]=b-d,a[32+h]=b+d,a[40+h]=m+n,a[48+h]=c-r,a[56+h]=f-t;for(h=0;64>h;h+=8)c=a[4+
h],b=a[2+h]+a[6+h],d=a[5+h]-a[3+h],m=a[1+h]+a[7+h],n=a[3+h]+a[5+h],k=a[1+h]-a[7+h],t=m+n,f=a[0+h],r=(473*k-196*d+128>>8)-t,m=r-(362*(m-n)+128>>8),n=f-c,l=(362*(a[2+h]-a[6+h])+128>>8)-b,g=f+c,c=n+l,f=g+b,n-=l,b=g-b,d=-m-(473*d+196*k+128>>8),a[0+h]=t+f+128>>8,a[1+h]=r+c+128>>8,a[2+h]=n-m+128>>8,a[3+h]=b-d+128>>8,a[4+h]=b+d+128>>8,a[5+h]=m+n+128>>8,a[6+h]=c-r+128>>8,a[7+h]=f-t+128>>8};b.PICTURE_RATE=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0];b.ZIG_ZAG=new Uint8Array([0,1,8,16,9,2,3,10,17,24,
	32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);b.DEFAULT_INTRA_QUANT_MATRIX=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]);b.DEFAULT_NON_INTRA_QUANT_MATRIX=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,
	16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]);b.PREMULTIPLIER_MATRIX=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]);b.MACROBLOCK_ADDRESS_INCREMENT=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,
	51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]);
	b.MACROBLOCK_TYPE_INTRA=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]);b.MACROBLOCK_TYPE_PREDICTIVE=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]);b.MACROBLOCK_TYPE_B=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]);b.MACROBLOCK_TYPE=[null,b.MACROBLOCK_TYPE_INTRA,b.MACROBLOCK_TYPE_PREDICTIVE,b.MACROBLOCK_TYPE_B];
	b.CODE_BLOCK_PATTERN=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,
		3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,
		51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]);b.MOTION=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,
		189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]);b.DCT_DC_SIZE_LUMINANCE=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]);b.DCT_DC_SIZE_CHROMINANCE=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]);b.DCT_COEFF=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,
		18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,
		189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,
		0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,
		612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]);b.PICTURE_TYPE={INTRA:1,PREDICTIVE:2,B:3};b.START={SEQUENCE:179,
		SLICE_FIRST:1,SLICE_LAST:175,PICTURE:0,EXTENSION:181,USER_DATA:178};return b}();
JSMpeg.Decoder.MP2Audio=function(){var b=function(a){JSMpeg.Decoder.Base.call(this,a);this.bits=new JSMpeg.BitBuffer(a.audioBufferSize||131072,a.streaming?JSMpeg.BitBuffer.MODE.EVICT:JSMpeg.BitBuffer.MODE.EXPAND);this.left=new Float32Array(1152);this.right=new Float32Array(1152);this.sampleRate=44100;this.D=new Float32Array(1024);this.D.set(b.SYNTHESIS_WINDOW,0);this.D.set(b.SYNTHESIS_WINDOW,512);this.V=new Float32Array(1024);this.U=new Int32Array(32);this.VPos=0;this.allocation=[Array(32),Array(32)];
	this.scaleFactorInfo=[new Uint8Array(32),new Uint8Array(32)];this.scaleFactor=[Array(32),Array(32)];this.sample=[Array(32),Array(32)];for(a=0;2>a;a++)for(var c=0;32>c;c++)this.scaleFactor[a][c]=[0,0,0],this.sample[a][c]=[0,0,0]};b.prototype=Object.create(JSMpeg.Decoder.Base.prototype);b.prototype.constructor=b;b.prototype.decode=function(){var a=this.bits.index>>3;if(a>=this.bits.byteLength)return!1;var c=this.decodeFrame(this.left,this.right);this.bits.index=a+c<<3;if(!c)return!1;this.destination&&
this.destination.play(this.sampleRate,this.left,this.right);this.advanceDecodedTime(this.left.length/this.sampleRate);return!0};b.prototype.getCurrentTime=function(){return this.decodedTime-(this.destination?this.destination.enqueuedTime:0)};b.prototype.decodeFrame=function(a,c){var e=this.bits.read(11),d=this.bits.read(2),k=this.bits.read(2),t=!this.bits.read(1);if(e!==b.FRAME_SYNC||d!==b.VERSION.MPEG_1||k!==b.LAYER.II)return 0;var m=this.bits.read(4)-1;if(13<m)return 0;var n=this.bits.read(2);if(3===
	n)return 0;d===b.VERSION.MPEG_2&&(n+=4,m+=14);k=this.bits.read(1);this.bits.read(1);var f=this.bits.read(2);f===b.MODE.JOINT_STEREO?e=this.bits.read(2)+1<<2:(this.bits.skip(2),e=f===b.MODE.MONO?0:32);this.bits.skip(4);t&&this.bits.skip(16);var l=b.BIT_RATE[m],t=b.SAMPLE_RATE[n],k=144E3*l/t+k|0;d===b.VERSION.MPEG_2?(m=2,d=30):(m=b.QUANT_LUT_STEP_2[b.QUANT_LUT_STEP_1[f===b.MODE.MONO?0:1][m]][n],d=m&63,m>>=6);e>d&&(e=d);for(var g=0;g<e;g++)this.allocation[0][g]=this.readAllocation(g,m),this.allocation[1][g]=
	this.readAllocation(g,m);for(g=e;g<d;g++)this.allocation[0][g]=this.allocation[1][g]=this.readAllocation(g,m);n=f===b.MODE.MONO?1:2;for(g=0;g<d;g++){for(m=0;m<n;m++)this.allocation[m][g]&&(this.scaleFactorInfo[m][g]=this.bits.read(2));f===b.MODE.MONO&&(this.scaleFactorInfo[1][g]=this.scaleFactorInfo[0][g])}for(g=0;g<d;g++){for(m=0;m<n;m++)if(this.allocation[m][g])switch(l=this.scaleFactor[m][g],this.scaleFactorInfo[m][g]){case 0:l[0]=this.bits.read(6);l[1]=this.bits.read(6);l[2]=this.bits.read(6);
	break;case 1:l[0]=l[1]=this.bits.read(6);l[2]=this.bits.read(6);break;case 2:l[0]=l[1]=l[2]=this.bits.read(6);break;case 3:l[0]=this.bits.read(6),l[1]=l[2]=this.bits.read(6)}f===b.MODE.MONO&&(this.scaleFactor[1][g][0]=this.scaleFactor[0][g][0],this.scaleFactor[1][g][1]=this.scaleFactor[0][g][1],this.scaleFactor[1][g][2]=this.scaleFactor[0][g][2])}for(n=f=0;3>n;n++)for(l=0;4>l;l++){for(g=0;g<e;g++)this.readSamples(0,g,n),this.readSamples(1,g,n);for(g=e;g<d;g++)this.readSamples(0,g,n),this.sample[1][g][0]=
	this.sample[0][g][0],this.sample[1][g][1]=this.sample[0][g][1],this.sample[1][g][2]=this.sample[0][g][2];for(g=d;32>g;g++)this.sample[0][g][0]=0,this.sample[0][g][1]=0,this.sample[0][g][2]=0,this.sample[1][g][0]=0,this.sample[1][g][1]=0,this.sample[1][g][2]=0;for(g=0;3>g;g++){this.VPos=this.VPos-64&1023;for(m=0;2>m;m++){b.MatrixTransform(this.sample[m],g,this.V,this.VPos);JSMpeg.Fill(this.U,0);for(var r=512-(this.VPos>>1),h=this.VPos%128>>1;1024>h;){for(var v=0;32>v;++v)this.U[v]+=this.D[r++]*this.V[h++];
	h+=96;r+=32}h=1120-h;for(r-=480;1024>h;){for(v=0;32>v;++v)this.U[v]+=this.D[r++]*this.V[h++];h+=96;r+=32}r=0===m?a:c;for(h=0;32>h;h++)r[f+h]=this.U[h]/2147418112}f+=32}}this.sampleRate=t;return k};b.prototype.readAllocation=function(a,c){a=b.QUANT_LUT_STEP_3[c][a];return(a=b.QUANT_LUT_STEP4[a&15][this.bits.read(a>>4)])?b.QUANT_TAB[a-1]:0};b.prototype.readSamples=function(a,c,e){var d=this.allocation[a][c];e=this.scaleFactor[a][c][e];a=this.sample[a][c];if(d){63===e?e=0:(c=e/3|0,e=b.SCALEFACTOR_BASE[e%
	3]+(1<<c>>1)>>c);c=d.levels;d.group?(d=this.bits.read(d.bits),a[0]=d%c,d=d/c|0,a[1]=d%c,a[2]=d/c|0):(a[0]=this.bits.read(d.bits),a[1]=this.bits.read(d.bits),a[2]=this.bits.read(d.bits));var k=65536/(c+1)|0;c=(c+1>>1)-1;d=(c-a[0])*k;a[0]=d*(e>>12)+(d*(e&4095)+2048>>12)>>12;d=(c-a[1])*k;a[1]=d*(e>>12)+(d*(e&4095)+2048>>12)>>12;d=(c-a[2])*k;a[2]=d*(e>>12)+(d*(e&4095)+2048>>12)>>12}else a[0]=a[1]=a[2]=0};b.MatrixTransform=function(a,c,b,d){var e,t,m,n,f,l,g,r,h,v,q,p,u,w,K,x,z,B,F,A,y,N,C,D,L,H,I,E,M,
	J,G;e=a[0][c]+a[31][c];t=.500602998235*(a[0][c]-a[31][c]);m=a[1][c]+a[30][c];n=.505470959898*(a[1][c]-a[30][c]);f=a[2][c]+a[29][c];l=.515447309923*(a[2][c]-a[29][c]);g=a[3][c]+a[28][c];r=.53104259109*(a[3][c]-a[28][c]);h=a[4][c]+a[27][c];v=.553103896034*(a[4][c]-a[27][c]);q=a[5][c]+a[26][c];p=.582934968206*(a[5][c]-a[26][c]);u=a[6][c]+a[25][c];w=.622504123036*(a[6][c]-a[25][c]);K=a[7][c]+a[24][c];x=.674808341455*(a[7][c]-a[24][c]);z=a[8][c]+a[23][c];B=.744536271002*(a[8][c]-a[23][c]);F=a[9][c]+a[22][c];
	A=.839349645416*(a[9][c]-a[22][c]);y=a[10][c]+a[21][c];N=.972568237862*(a[10][c]-a[21][c]);C=a[11][c]+a[20][c];D=1.16943993343*(a[11][c]-a[20][c]);L=a[12][c]+a[19][c];H=1.48416461631*(a[12][c]-a[19][c]);I=a[13][c]+a[18][c];E=2.05778100995*(a[13][c]-a[18][c]);M=a[14][c]+a[17][c];J=3.40760841847*(a[14][c]-a[17][c]);G=a[15][c]+a[16][c];a=10.1900081235*(a[15][c]-a[16][c]);c=e+G;G=.502419286188*(e-G);e=m+M;M=.52249861494*(m-M);m=f+I;I=.566944034816*(f-I);f=g+L;L=.64682178336*(g-L);g=h+C;C=.788154623451*
		(h-C);h=q+y;y=1.06067768599*(q-y);q=u+F;F=1.72244709824*(u-F);u=K+z;z=5.10114861869*(K-z);K=c+u;u=.509795579104*(c-u);c=e+q;e=.601344886935*(e-q);q=m+h;h=.899976223136*(m-h);m=f+g;g=2.56291544774*(f-g);f=K+m;K=.541196100146*(K-m);m=c+q;q=1.30656296488*(c-q);c=f+m;f=.707106781187*(f-m);m=K+q;K=.707106781187*(K-q);q=u+g;u=.541196100146*(u-g);g=e+h;h=1.30656296488*(e-h);e=q+g;g=.707106781187*(q-g);q=u+h;u=.707106781187*(u-h);q+=u;e+=q;q+=g;g+=u;h=G+z;G=.509795579104*(G-z);z=M+F;M=.601344886935*(M-F);
	F=I+y;y=.899976223136*(I-y);I=L+C;C=2.56291544774*(L-C);L=h+I;h=.541196100146*(h-I);I=z+F;F=1.30656296488*(z-F);z=L+I;I=.707106781187*(L-I);L=h+F;F=.707106781187*(h-F);L+=F;h=G+C;G=.541196100146*(G-C);C=M+y;y=1.30656296488*(M-y);M=h+C;C=.707106781187*(h-C);h=G+y;G=.707106781187*(G-y);h+=G;M+=h;h+=C;C+=G;z+=M;M+=L;L+=h;h+=I;I+=C;C+=F;F+=G;y=t+a;t=.502419286188*(t-a);a=n+J;n=.52249861494*(n-J);J=l+E;E=.566944034816*(l-E);l=r+H;r=.64682178336*(r-H);H=v+D;v=.788154623451*(v-D);D=p+N;N=1.06067768599*(p-
		N);p=w+A;A=1.72244709824*(w-A);w=x+B;x=5.10114861869*(x-B);B=y+w;w=.509795579104*(y-w);y=a+p;a=.601344886935*(a-p);p=J+D;D=.899976223136*(J-D);J=l+H;H=2.56291544774*(l-H);l=B+J;B=.541196100146*(B-J);J=y+p;p=1.30656296488*(y-p);y=l+J;J=.707106781187*(l-J);l=B+p;p=.707106781187*(B-p);l+=p;B=w+H;H=.541196100146*(w-H);w=a+D;D=1.30656296488*(a-D);a=B+w;w=.707106781187*(B-w);B=H+D;D=.707106781187*(H-D);B+=D;a+=B;B+=w;H=w+D;w=t+x;t=.509795579104*(t-x);x=n+A;n=.601344886935*(n-A);A=E+N;N=.899976223136*(E-
		N);E=r+v;v=2.56291544774*(r-v);r=w+E;w=.541196100146*(w-E);E=x+A;A=1.30656296488*(x-A);x=r+E;E=.707106781187*(r-E);r=w+A;A=.707106781187*(w-A);r+=A;w=t+v;t=.541196100146*(t-v);v=n+N;N=1.30656296488*(n-N);n=w+v;v=.707106781187*(w-v);w=t+N;t=.707106781187*(t-N);w+=t;n+=w;w+=v;v+=t;x+=n;n+=r;r+=w;w+=E;E+=v;v+=A;A+=t;y+=x;x+=a;a+=n;n+=l;l+=r;r+=B;B+=w;w+=J;J+=E;E+=H;H+=v;v+=p;p+=A;A+=D;D+=t;b[d+48]=-c;b[d+49]=b[d+47]=-y;b[d+50]=b[d+46]=-z;b[d+51]=b[d+45]=-x;b[d+52]=b[d+44]=-e;b[d+53]=b[d+43]=-a;b[d+54]=
		b[d+42]=-M;b[d+55]=b[d+41]=-n;b[d+56]=b[d+40]=-(m+K);b[d+57]=b[d+39]=-l;b[d+58]=b[d+38]=-L;b[d+59]=b[d+37]=-r;b[d+60]=b[d+36]=-q;b[d+61]=b[d+35]=-B;b[d+62]=b[d+34]=-h;b[d+63]=b[d+33]=-w;b[d+32]=-f;b[d+0]=f;b[d+31]=-J;b[d+1]=J;b[d+30]=-I;b[d+2]=I;b[d+29]=-E;b[d+3]=E;b[d+28]=-g;b[d+4]=g;b[d+27]=-H;b[d+5]=H;b[d+26]=-C;b[d+6]=C;b[d+25]=-v;b[d+7]=v;b[d+24]=-K;b[d+8]=K;b[d+23]=-p;b[d+9]=p;b[d+22]=-F;b[d+10]=F;b[d+21]=-A;b[d+11]=A;b[d+20]=-u;b[d+12]=u;b[d+19]=-D;b[d+13]=D;b[d+18]=-G;b[d+14]=G;b[d+17]=-t;
	b[d+15]=t;b[d+16]=0};b.FRAME_SYNC=2047;b.VERSION={MPEG_2_5:0,MPEG_2:2,MPEG_1:3};b.LAYER={III:1,II:2,I:3};b.MODE={STEREO:0,JOINT_STEREO:1,DUAL_CHANNEL:2,MONO:3};b.SAMPLE_RATE=new Uint16Array([44100,48E3,32E3,0,22050,24E3,16E3,0]);b.BIT_RATE=new Uint16Array([32,48,56,64,80,96,112,128,160,192,224,256,320,384,8,16,24,32,40,48,56,64,80,96,112,128,144,160]);b.SCALEFACTOR_BASE=new Uint32Array([33554432,26632170,21137968]);b.SYNTHESIS_WINDOW=new Float32Array([0,-.5,-.5,-.5,-.5,-.5,-.5,-1,-1,-1,-1,-1.5,-1.5,
	-2,-2,-2.5,-2.5,-3,-3.5,-3.5,-4,-4.5,-5,-5.5,-6.5,-7,-8,-8.5,-9.5,-10.5,-12,-13,-14.5,-15.5,-17.5,-19,-20.5,-22.5,-24.5,-26.5,-29,-31.5,-34,-36.5,-39.5,-42.5,-45.5,-48.5,-52,-55.5,-58.5,-62.5,-66,-69.5,-73.5,-77,-80.5,-84.5,-88,-91.5,-95,-98,-101,-104,106.5,109,111,112.5,113.5,114,114,113.5,112,110.5,107.5,104,100,94.5,88.5,81.5,73,63.5,53,41.5,28.5,14.5,-1,-18,-36,-55.5,-76.5,-98.5,-122,-147,-173.5,-200.5,-229.5,-259.5,-290.5,-322.5,-355.5,-389.5,-424,-459.5,-495.5,-532,-568.5,-605,-641.5,-678,-714,
	-749,-783.5,-817,-849,-879.5,-908.5,-935,-959.5,-981,-1000.5,-1016,-1028.5,-1037.5,-1042.5,-1043.5,-1040,-1031.5,1018.5,1E3,976,946.5,911,869.5,822,767.5,707,640,565.5,485,397,302.5,201,92.5,-22.5,-144,-272.5,-407,-547.5,-694,-846,-1003,-1165,-1331.5,-1502,-1675.5,-1852.5,-2031.5,-2212.5,-2394,-2576.5,-2758.5,-2939.5,-3118.5,-3294.5,-3467.5,-3635.5,-3798.5,-3955,-4104.5,-4245.5,-4377.5,-4499,-4609.5,-4708,-4792.5,-4863.5,-4919,-4958,-4979.5,-4983,-4967.5,-4931.5,-4875,-4796,-4694.5,-4569.5,-4420,
	-4246,-4046,-3820,-3567,3287,2979.5,2644,2280.5,1888,1467.5,1018.5,541,35,-499,-1061,-1650,-2266.5,-2909,-3577,-4270,-4987.5,-5727.5,-6490,-7274,-8077.5,-8899.5,-9739,-10594.5,-11464.5,-12347,-13241,-14144.5,-15056,-15973.5,-16895.5,-17820,-18744.5,-19668,-20588,-21503,-22410.5,-23308.5,-24195,-25068.5,-25926.5,-26767,-27589,-28389,-29166.5,-29919,-30644.5,-31342,-32009.5,-32645,-33247,-33814.5,-34346,-34839.5,-35295,-35710,-36084.5,-36417.5,-36707.5,-36954,-37156.5,-37315,-37428,-37496,37519,37496,
	37428,37315,37156.5,36954,36707.5,36417.5,36084.5,35710,35295,34839.5,34346,33814.5,33247,32645,32009.5,31342,30644.5,29919,29166.5,28389,27589,26767,25926.5,25068.5,24195,23308.5,22410.5,21503,20588,19668,18744.5,17820,16895.5,15973.5,15056,14144.5,13241,12347,11464.5,10594.5,9739,8899.5,8077.5,7274,6490,5727.5,4987.5,4270,3577,2909,2266.5,1650,1061,499,-35,-541,-1018.5,-1467.5,-1888,-2280.5,-2644,-2979.5,3287,3567,3820,4046,4246,4420,4569.5,4694.5,4796,4875,4931.5,4967.5,4983,4979.5,4958,4919,4863.5,
	4792.5,4708,4609.5,4499,4377.5,4245.5,4104.5,3955,3798.5,3635.5,3467.5,3294.5,3118.5,2939.5,2758.5,2576.5,2394,2212.5,2031.5,1852.5,1675.5,1502,1331.5,1165,1003,846,694,547.5,407,272.5,144,22.5,-92.5,-201,-302.5,-397,-485,-565.5,-640,-707,-767.5,-822,-869.5,-911,-946.5,-976,-1E3,1018.5,1031.5,1040,1043.5,1042.5,1037.5,1028.5,1016,1000.5,981,959.5,935,908.5,879.5,849,817,783.5,749,714,678,641.5,605,568.5,532,495.5,459.5,424,389.5,355.5,322.5,290.5,259.5,229.5,200.5,173.5,147,122,98.5,76.5,55.5,36,
	18,1,-14.5,-28.5,-41.5,-53,-63.5,-73,-81.5,-88.5,-94.5,-100,-104,-107.5,-110.5,-112,-113.5,-114,-114,-113.5,-112.5,-111,-109,106.5,104,101,98,95,91.5,88,84.5,80.5,77,73.5,69.5,66,62.5,58.5,55.5,52,48.5,45.5,42.5,39.5,36.5,34,31.5,29,26.5,24.5,22.5,20.5,19,17.5,15.5,14.5,13,12,10.5,9.5,8.5,8,7,6.5,5.5,5,4.5,4,3.5,3.5,3,2.5,2.5,2,2,1.5,1.5,1,1,1,1,.5,.5,.5,.5,.5,.5]);b.QUANT_LUT_STEP_1=[[0,0,1,1,1,2,2,2,2,2,2,2,2,2],[0,0,0,0,0,0,1,1,1,2,2,2,2,2]];b.QUANT_TAB={A:91,B:94,C:8,D:12};b.QUANT_LUT_STEP_2=
	[[b.QUANT_TAB.C,b.QUANT_TAB.C,b.QUANT_TAB.D],[b.QUANT_TAB.A,b.QUANT_TAB.A,b.QUANT_TAB.A],[b.QUANT_TAB.B,b.QUANT_TAB.A,b.QUANT_TAB.B]];b.QUANT_LUT_STEP_3=[[68,68,52,52,52,52,52,52,52,52,52,52],[67,67,67,66,66,66,66,66,66,66,66,49,49,49,49,49,49,49,49,49,49,49,49,32,32,32,32,32,32,32],[69,69,69,69,52,52,52,52,52,52,52,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36]];b.QUANT_LUT_STEP4=[[0,1,2,17],[0,1,2,3,4,5,6,17],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,17],[0,1,3,5,6,7,8,9,10,11,12,13,14,15,
	16,17],[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,17],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];b.QUANT_TAB=[{levels:3,group:1,bits:5},{levels:5,group:1,bits:7},{levels:7,group:0,bits:3},{levels:9,group:1,bits:10},{levels:15,group:0,bits:4},{levels:31,group:0,bits:5},{levels:63,group:0,bits:6},{levels:127,group:0,bits:7},{levels:255,group:0,bits:8},{levels:511,group:0,bits:9},{levels:1023,group:0,bits:10},{levels:2047,group:0,bits:11},{levels:4095,group:0,bits:12},{levels:8191,group:0,bits:13},{levels:16383,
	group:0,bits:14},{levels:32767,group:0,bits:15},{levels:65535,group:0,bits:16}];return b}();
JSMpeg.Renderer.WebGL=function(){var b=function(a){this.canvas=a.canvas||document.createElement("canvas");this.width=this.canvas.width;this.height=this.canvas.height;this.enabled=!0;a={preserveDrawingBuffer:!!a.preserveDrawingBuffer,alpha:!1,depth:!1,stencil:!1,antialias:!1};this.gl=this.canvas.getContext("webgl",a)||this.canvas.getContext("experimental-webgl",a);if(!this.gl)throw Error("Failed to get WebGL Context");a=this.gl;var c;this.vertexBuffer=a.createBuffer();c=new Float32Array([0,0,0,1,1,
	0,1,1]);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW);this.program=this.createProgram(b.SHADER.VERTEX_IDENTITY,b.SHADER.FRAGMENT_YCRCB_TO_RGBA);c=a.getAttribLocation(this.program,"vertex");a.enableVertexAttribArray(c);a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0);this.textureY=this.createTexture(0,"textureY");this.textureCb=this.createTexture(1,"textureCb");this.textureCr=this.createTexture(2,"textureCr");this.loadingProgram=this.createProgram(b.SHADER.VERTEX_IDENTITY,
	b.SHADER.FRAGMENT_LOADING);c=a.getAttribLocation(this.loadingProgram,"vertex");a.enableVertexAttribArray(c);a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0);this.shouldCreateUnclampedViews=!this.allowsClampedTextureData()};b.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.textureY);a.deleteTexture(this.textureCb);a.deleteTexture(this.textureCr);a.deleteProgram(this.program);a.deleteProgram(this.loadingProgram);a.deleteBuffer(this.vertexBuffer)};b.prototype.resize=function(a,b){this.width=
	a|0;this.height=b|0;this.canvas.width=this.width;this.canvas.height=this.height;this.gl.useProgram(this.program);this.gl.viewport(0,0,this.width,this.height)};b.prototype.createTexture=function(a,b){var c=this.gl,d=c.createTexture();c.bindTexture(c.TEXTURE_2D,d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);
	c.uniform1i(c.getUniformLocation(this.program,b),a);return d};b.prototype.createProgram=function(a,b){var c=this.gl,d=c.createProgram();c.attachShader(d,this.compileShader(c.VERTEX_SHADER,a));c.attachShader(d,this.compileShader(c.FRAGMENT_SHADER,b));c.linkProgram(d);c.useProgram(d);return d};b.prototype.compileShader=function(a,b){var c=this.gl;a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);if(!c.getShaderParameter(a,c.COMPILE_STATUS))throw Error(c.getShaderInfoLog(a));return a};b.prototype.allowsClampedTextureData=
	function(){var a=this.gl,b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,1,1,0,a.LUMINANCE,a.UNSIGNED_BYTE,new Uint8ClampedArray([0]));return 0===a.getError()};b.prototype.renderProgress=function(a){var b=this.gl;b.useProgram(this.loadingProgram);var e=b.getUniformLocation(this.loadingProgram,"progress");b.uniform1f(e,a);b.drawArrays(b.TRIANGLE_STRIP,0,4)};b.prototype.render=function(a,b,e){if(this.enabled){var c=this.gl,k=this.width+15>>4<<4,t=this.height,
	m=k>>1,n=t>>1;this.shouldCreateUnclampedViews&&(a=new Uint8Array(a.buffer),b=new Uint8Array(b.buffer),e=new Uint8Array(e.buffer));c.useProgram(this.program);this.updateTexture(c.TEXTURE0,this.textureY,k,t,a);this.updateTexture(c.TEXTURE1,this.textureCb,m,n,b);this.updateTexture(c.TEXTURE2,this.textureCr,m,n,e);c.drawArrays(c.TRIANGLE_STRIP,0,4)}};b.prototype.updateTexture=function(a,b,e,d,k){var c=this.gl;c.activeTexture(a);c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.LUMINANCE,e,d,
	0,c.LUMINANCE,c.UNSIGNED_BYTE,k)};b.IsSupported=function(){try{if(!window.WebGLRenderingContext)return!1;var a=document.createElement("canvas");return!(!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(c){return!1}};b.SHADER={FRAGMENT_YCRCB_TO_RGBA:"precision mediump float;\nuniform sampler2D textureY;\nuniform sampler2D textureCb;\nuniform sampler2D textureCr;\nvarying vec2 texCoord;\nmat4 rec601 = mat4(\n1.16438,  0.00000,  1.59603, -0.87079,\n1.16438, -0.39176, -0.81297,  0.52959,\n1.16438,  2.01723,  0.00000, -1.08139,\n0, 0, 0, 1\n);\nvoid main() {\nfloat y = texture2D(textureY, texCoord).r;\nfloat cb = texture2D(textureCb, texCoord).r;\nfloat cr = texture2D(textureCr, texCoord).r;\ngl_FragColor = vec4(y, cr, cb, 1.0) * rec601;\n}",
	FRAGMENT_LOADING:"precision mediump float;\nuniform float progress;\nvarying vec2 texCoord;\nvoid main() {\nfloat c = ceil(progress-(1.0-texCoord.y));\ngl_FragColor = vec4(c,c,c,1);\n}",VERTEX_IDENTITY:"attribute vec2 vertex;\nvarying vec2 texCoord;\nvoid main() {\ntexCoord = vertex;\ngl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);\n}"};return b}();
JSMpeg.Renderer.Canvas2D=function(){var b=function(a){this.canvas=a.canvas||document.createElement("canvas");this.width=this.canvas.width;this.height=this.canvas.height;this.enabled=!0;this.context=this.canvas.getContext("2d")};b.prototype.destroy=function(){};b.prototype.resize=function(a,b){this.width=a|0;this.height=b|0;this.canvas.width=this.width;this.canvas.height=this.height;this.imageData=this.context.getImageData(0,0,this.width,this.height);JSMpeg.Fill(this.imageData.data,255)};b.prototype.renderProgress=
	function(a){var b=this.canvas.width,e=this.canvas.height,d=this.context;d.fillStyle="#222";d.fillRect(0,0,b,e);d.fillStyle="#fff";d.fillRect(0,e-e*a,b,e*a)};b.prototype.render=function(a,b,e){this.YCbCrToRGBA(a,b,e,this.imageData.data);this.context.putImageData(this.imageData,0,0)};b.prototype.YCbCrToRGBA=function(a,b,e,d){if(this.enabled)for(var c=this.width+15>>4<<4,t=0,m=c,n=c+(c-this.width),f=0,c=(c>>1)-(this.width>>1),l=0,g=4*this.width,r=4*this.width,h=this.width>>1,v=this.height>>1,q,p,u,w=
	0;w<v;w++){for(var K=0;K<h;K++){q=b[f];p=e[f];f++;u=q+(103*q>>8)-179;q=(88*p>>8)-44+(183*q>>8)-91;p=p+(198*p>>8)-227;var x=a[t++],z=a[t++];d[l]=x+u;d[l+1]=x-q;d[l+2]=x+p;d[l+4]=z+u;d[l+5]=z-q;d[l+6]=z+p;l+=8;x=a[m++];z=a[m++];d[g]=x+u;d[g+1]=x-q;d[g+2]=x+p;d[g+4]=z+u;d[g+5]=z-q;d[g+6]=z+p;g+=8}t+=n;m+=n;l+=r;g+=r;f+=c}};return b}();
JSMpeg.AudioOutput.WebAudio=function(){var b=function(a){this.context=b.CachedContext=b.CachedContext||new (window.AudioContext||window.webkitAudioContext);this.destination=this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.context._connections=(this.context._connections||0)+1;this.startTime=0;this.buffer=null;this.wallclockStartTime=0;this.volume=1;this.enabled=!0;this.unlocked=!b.NeedsUnlocking();Object.defineProperty(this,"enqueuedTime",{get:this.getEnqueuedTime})};
	b.prototype.destroy=function(){this.gain.disconnect();this.context._connections--;0===this.context._connections&&(this.context.close(),b.CachedContext=null)};b.prototype.play=function(a,b,e){this.enabled&&(this.unlocked?(this.gain.gain.value=this.volume,a=this.context.createBuffer(2,b.length,a),a.getChannelData(0).set(b),a.getChannelData(1).set(e),b=this.context.createBufferSource(),b.buffer=a,b.connect(this.destination),e=this.context.currentTime,a=a.duration,this.startTime<e&&(this.startTime=e,
		this.wallclockStartTime=JSMpeg.Now()),b.start(this.startTime),this.startTime+=a,this.wallclockStartTime+=a):(e=JSMpeg.Now(),this.wallclockStartTime<e&&(this.wallclockStartTime=e),this.wallclockStartTime+=b.length/a))};b.prototype.stop=function(){this.gain.gain.value=0};b.prototype.getEnqueuedTime=function(){return Math.max(this.wallclockStartTime-JSMpeg.Now(),0)};b.prototype.resetEnqueuedTime=function(){this.startTime=this.context.currentTime;this.wallclockStartTime=JSMpeg.Now()};b.prototype.unlock=
		function(a){if(this.unlocked)a&&a();else{this.unlockCallback=a;a=this.context.createBuffer(1,1,22050);var b=this.context.createBufferSource();b.buffer=a;b.connect(this.destination);b.start(0);setTimeout(this.checkIfUnlocked.bind(this,b,0),0)}};b.prototype.checkIfUnlocked=function(a,b){a.playbackState===a.PLAYING_STATE||a.playbackState===a.FINISHED_STATE?(this.unlocked=!0,this.unlockCallback&&(this.unlockCallback(),this.unlockCallback=null)):10>b&&setTimeout(this.checkIfUnlocked.bind(this,a,b+1),100)};
	b.NeedsUnlocking=function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)};b.IsSupported=function(){return window.AudioContext||window.webkitAudioContext};b.CachedContext=null;return b}();